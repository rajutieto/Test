#include "stm32f10x.h"
#include "usart1.h" 
#include "math.h"

/*	the header of test function  */
#include "rt_nonfinite.h"
#include "find_resultant.h"
#include "find_resultant_initialize.h"


/**
  * @brief  Main program.
  * @param  None
  * @retval : None
  */
u8 print_buffer[1000];
 
const real_T test_obtData[16] = {  //define the input 
123,
100,
-48,
213,
616,
48,
-35,
-353,
124,
100,
-56,
226,
620,
48,
-35,
-353
};

real_T resultant[2] = {  //define the input 
0.0,
0.0
};

/*const real_T resultant[238] = {  //define the input
534.114219994188,
534.114219994188,
536.519337955306,
536.519337955306,
536.519337955306,
542.916199795143,
542.916199795143,
542.916199795143,
549.305015451343,
549.305015451343,
549.305015451343,
557.136428534340,
557.136428534340,
557.136428534340,
563.620439657754,
563.620439657754,
563.620439657754,
569.455002612147,
569.455002612147,
569.455002612147,
573.458804100173,
573.458804100173,
573.458804100173,
579.675771444693,
579.675771444693,
579.675771444693,
583.622309374822,
583.622309374822,
583.622309374822,
591.080366786108,
591.080366786108,
591.080366786108,
600.726227161758,
600.726227161758,
600.726227161758,
610.573500898950,
610.573500898950,
610.573500898950,
620.114505555224,
620.114505555224,
620.114505555224,
629.801556047617,
629.801556047617,
636.220873596584,
638.553051828899,
638.553051828899,
645.185244716585,
646.455721608217,
646.455721608217,
646.455721608217,
647.180809357014,
647.180809357014,
647.180809357014,
647.135225435921,
647.135225435921,
655.967224790995,
657.111862623100,
657.111862623100,
665.959458225499,
667.526778489073,
667.526778489073,
676.130904485219,
677.609031817021,
677.609031817021,
685.898680564411,
687.395082903566,
687.395082903566,
695.223705004368,
696.885930407553,
696.885930407553,
704.172564077869,
704.753857740417,
704.753857740417,
710.029576848740,
709.931686854447,
709.931686854447,
709.523783956535,
708.248543944850,
708.248543944850,
706.378085730298,
703.700220264283,
703.700220264283,
696.572322160449,
694.453022169247,
694.453022169247,
694.601324502048,
693.318829976512,
693.318829976512,
693.591378262446,
693.194056523857,
693.194056523857,
699.711369065846,
700.530513254062,
700.530513254062,
712.633145454237,
712.942494174670,
712.942494174670,
728.702271164294,
728.558851432058,
728.558851432058,
739.081862854177,
738.832863373037,
738.832863373037,
739.450471634172,
738.098909361069,
738.098909361069,
736.334842310209,
734.674757971172,
734.674757971172,
729.196818424217,
727.178107481242,
727.178107481242,
722.806336441512,
721.463096769336,
721.463096769336,
720.953535257301,
720.950761148083,
720.950761148083,
731.553825770872,
731.927592047192,
731.927592047192,
744.732166620994,
745.162398407220,
745.162398407220,
752.828001604616,
753.372417865162,
753.372417865162,
758.966402418447,
759.211433001374,
759.211433001374,
755.988756530148,
755.537556975165,
755.537556975165,
749.042722413081,
748.968624175940,
748.968624175940,
739.882423091669,
740.387060935022,
740.387060935022,
740.923747763560,
741.774224410636,
741.774224410636,
746.931054381862,
748.813728506629,
748.813728506629,
755.251613702348,
756.692143477121,
756.692143477121,
764.433123301182,
765.924931047423,
765.924931047423,
773.247049784220,
774.549546510745,
774.549546510745,
777.587937149233,
777.875311344948,
772.301754497554,
772.301754497554,
772.990297481152,
768.972691322650,
768.972691322650,
770.098045705870,
763.310552789623,
763.310552789623,
763.193291375127,
759.578172408871,
759.578172408871,
760.882382500739,
760.433429038992,
760.433429038992,
761.166210495448,
768.797112377511,
768.797112377511,
769.124827319987,
774.185378317106,
774.185378317106,
775.035483058679,
776.371045312742,
776.371045312742,
776.198428238553,
772.558088430896,
772.558088430896,
772.561324426741,
766.715070935742,
766.715070935742,
766.001958222040,
751.898264394858,
751.898264394858,
751.398695766768,
743.808443081954,
743.808443081954,
743.708948446904,
740.494429418615,
740.494429418615,
741.153155562330,
747.354668146256,
747.354668146256,
748.081546357080,
752.748962138109,
752.748962138109,
753.380382011637,
761.067014132133,
761.067014132133,
761.444679540149,
757.496534645539,
757.496534645539,
757.056801039394,
743.539508028995,
743.539508028995,
742.581982006027,
727.455840584155,
727.455840584155,
725.884288299451,
712.219067422377,
712.219067422377,
711.133602074884,
707.978813242317,
707.978813242317,
707.829781797856,
714.252756382501,
714.252756382501,
713.983193079501,
724.965516421299,
724.965516421299,
725.230997682807,
736.862945194016,
736.862945194016,
737.998644985206,
744.897308358676,
744.897308358676,
745.962465543676,
746.079754449885,
746.079754449885,
746.302217603566,
741.242200633504,
741.242200633504,
741.919806987251,
730.747562431788

};

*/

//const real_T speed_box=138.0;
//const real_T variation=50.0;
//const real_T cvVal=1.974;
//const real_T ref_cv=0.1;
//const real_T variation_cv=0.01;
//const real_T max_cv=0.8;



int main(void)
{	 
	//real_T box_speed;
	//real_T box_stat;
	//real_T metal_stat;
	//real_T largenoisemetal_stat;
	//real_T cvVal;
	
	/* USART1 config */	
	USART1_Config();
	printf( "\r\n Test1 is Starting...... \r\n" );
	//printf( "Testing print =%f",test_obtData[1]);
	
	/*matlab function test*/
	
	find_resultant_initialize();
	find_resultant(test_obtData, resultant);
	//checkLargeNoiseMetal_initialize();
	//largenoisemetal_stat=checkLargeNoiseMetal(cvVal,max_cv);
	
	/*findBoxspeed_initialize(); 
	box_speed = findBoxspeed(test_obtData);*/
	
	//findCV_initialize();
	//cvVal=findCV(resultant);
	
	/*print the result*/	
	/*sprintf((char *)print_buffer, "box speed = %f",box_speed);
	printf("%s\r\n",print_buffer);*/
	
	sprintf((char *)print_buffer, "Resultant (1) = %f",resultant[1]);
	printf("%s\r\n",print_buffer);
	
	printf( "\r\n Test is end...... \r\n" );
	while (1)
	{
		
	}
}
/******************* (C) COPYRIGHT 2012 WildFire Team *****END OF FILE************/
